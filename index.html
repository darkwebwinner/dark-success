<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Dark Success</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}
body{margin:0;font-family:'Vazirmatn',sans-serif;background:#020617;color:#fff}
header{padding:16px;text-align:center;font-size:22px;font-weight:700;border-bottom:1px solid #312e81}
.container{max-width:1100px;margin:auto;padding:20px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
.card{background:#020617;border:1px solid #312e81;border-radius:14px;padding:18px;text-align:center;cursor:pointer}
.glass{background:rgba(255,255,255,.06);border:1px solid #312e81;border-radius:16px;padding:18px;margin-top:18px}
button{width:100%;padding:12px;margin-top:10px;border-radius:10px;border:none;font-weight:700;background:linear-gradient(135deg,#7c3aed,#2563eb);color:#fff;cursor:pointer}
.hidden{display:none}

/* Wheel */
#wheelBox{position:relative;width:360px;height:360px;margin:20px auto}
canvas{border-radius:50%;box-shadow:0 0 60px rgba(0,0,0,.9)}
#pointer{position:absolute;top:-8px;left:50%;transform:translateX(-50%);font-size:34px}
#winner{margin-top:15px;font-size:18px;font-weight:700;color:#facc15;text-align:center}
</style>
</head>

<body>
<header>ğŸŒ‘ Dark Success</header>

<div class="container">
  <div class="grid">
    <div class="card">ğŸ“Š ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø®Ø±ÛŒØ¯</div>
    <div class="card">ğŸ“ˆ ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø±</div>
    <div class="card">ğŸ’° Ø·Ù„Ø§ ÛŒØ§ Ø±Ù…Ø² Ø§Ø±Ø²ØŸ</div>
    <div class="card">â“ Ù‡ÙˆÙ„Ø¯ ÛŒØ§ ØªØ±ÛŒØ¯ØŸ</div>
    <div class="card" onclick="wheelSection.classList.toggle('hidden')">ğŸ¯ Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ø´Ø§Ù†Ø³</div>
  </div>

  <div class="glass">
    <h3>â­ Ø§Ø´ØªØ±Ø§Ú© VIP</h3>
    <button onclick="window.open('https://t.me/cvvx441','_blank')">Ø§Ø´ØªØ±Ø§Ú© VIP Û³Û° Ø±ÙˆØ²Ù‡</button>
    <button onclick="window.open('https://t.me/cvvx441','_blank')">Ø§Ø´ØªØ±Ø§Ú© VIP Û¹Û° Ø±ÙˆØ²Ù‡</button>
  </div>

  <div id="wheelSection" class="glass hidden">
    <h3>ğŸ¯ Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ø´Ø§Ù†Ø³</h3>
    <div id="wheelBox">
      <div id="pointer">â¬‡ï¸</div>
      <canvas id="wheel" width="360" height="360"></canvas>
    </div>
    <button id="spinBtn">Ú†Ø±Ø®Ø´ ğŸ¡</button>
    <div id="winner"></div>
  </div>
</div>

<audio id="spinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-small-sweep-transition-166.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const spinBtn = document.getElementById("spinBtn");
const winner = document.getElementById("winner");
const spinSound = document.getElementById("spinSound");
const winSound = document.getElementById("winSound");

const prizes = [
  "1 Ø¯Ù„Ø§Ø±",
  "VIP 10 Ø±ÙˆØ²Ù‡",
  "Ù¾ÙˆÚ†",
  "VIP 5 Ø±ÙˆØ²Ù‡",
  "Ù¾ÙˆÚ†",
  "VIP 20 Ø±ÙˆØ²Ù‡",
  "5 Ø¯Ù„Ø§Ø±"
];

const colors = ["#22c55e","#3b82f6","#334155","#8b5cf6","#475569","#f59e0b","#ef4444"];
const N = prizes.length;
const ARC = Math.PI * 2 / N;

let currentRotation = 0; // ÙÙ‚Ø· Ù†Ù…Ø§ÛŒØ´ÛŒ

function draw(rotation=0){
  ctx.setTransform(1,0,0,1,0,0); // ğŸ”´ reset Ú©Ø§Ù…Ù„
  ctx.clearRect(0,0,360,360);
  ctx.translate(180,180);
  ctx.rotate(rotation);
  ctx.translate(-180,-180);

  for(let i=0;i<N;i++){
    ctx.beginPath();
    ctx.moveTo(180,180);
    ctx.arc(180,180,180,i*ARC,(i+1)*ARC);
    ctx.fillStyle=colors[i];
    ctx.fill();

    ctx.save();
    ctx.translate(180,180);
    ctx.rotate(i*ARC + ARC/2);
    ctx.fillStyle="#fff";
    ctx.font="13px Vazirmatn";
    ctx.textAlign="center";
    ctx.fillText(prizes[i],120,5);
    ctx.restore();
  }
}
draw();

spinBtn.onclick = ()=>{
  spinBtn.disabled = true;
  winner.textContent = "";

  const selectedIndex = Math.floor(Math.random()*N);
  const selectedPrize = prizes[selectedIndex];

  const spins = 6;
  const targetRotation =
    spins * Math.PI * 2 +
    (N - selectedIndex) * ARC -
    ARC/2;

  const start = currentRotation;
  const diff = targetRotation - start;
  const duration = 4000;
  const startTime = performance.now();

  spinSound.currentTime = 0;
  spinSound.play();

  function animate(t){
    const p = Math.min((t-startTime)/duration,1);
    const ease = 1 - Math.pow(1-p,3);
    currentRotation = start + diff * ease;
    draw(currentRotation);

    if(p<1){
      requestAnimationFrame(animate);
    }else{
      spinSound.pause();
      if(selectedPrize==="Ù¾ÙˆÚ†"){
        winner.textContent="Ù¾ÙˆÚ†! Ø¯ÙØ¹Ù‡ Ø¨Ø¹Ø¯ Ù…ÙˆÙÙ‚ Ø¨Ø§Ø´ÛŒØ¯";
      }else{
        winSound.currentTime=0;
        winSound.play();
        winner.textContent="ğŸ‰ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒØ¯: "+selectedPrize;
      }
      spinBtn.disabled=false;
    }
  }
  requestAnimationFrame(animate);
};
</script>
</body>
</html>
